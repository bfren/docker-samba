#!/usr/bin/nu

use bf
bf env load -x

# Attempt to connect to the local Samba server and list shares
def main [] {
    bf write debug $"Requesting local shares."

    # capture output of drill executable
    let result = do { ^smbclient -L \\localhost -U % -m SMB3 } | complete
    if $result.exit_code > 0 { bf write error --code $result.exit_code $result.stderr }
}
